<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>FREGO HOUSE</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="css/iconsmind.css" rel="stylesheet" type="text/css" media="all" />
        <link href="css/bootstrap.css" rel="stylesheet" type="text/css" media="all" />
        <link href="css/flickity.css" rel="stylesheet" type="text/css" media="all" />
        <link href="css/stack-interface.css" rel="stylesheet" type="text/css" media="all" />
        <link href="css/theme-greensea.css" rel="stylesheet" type="text/css" media="all" />
        <link href="css/custom.css" rel="stylesheet" type="text/css" media="all" />
        <link href="https://fonts.googleapis.com/css?family=Open+Sans:200,300,400,400i,500,600,700" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css?family=Lato:400,400i,700%7CRubik:300,400,500" rel="stylesheet" type="text/css">
        <link href="css/font-rubiklato.css" rel="stylesheet" type="text/css">
        <link rel="stylesheet" href="css/litepicker.css"/>

    </head>
    <body data-smooth-scroll-offset="77">
        <div class="nav-container"> </div>
        <div class="main-container">
            <section class="bg--dark space--xxs">
                <div class="container">
                    <div class="cta cta--horizontal text-center-xs row">
                        <div class="col-md-4 col-6">
                            <h4>FREGO HOUSE</h4>
                        </div>
                        <div class="offset-md-5 col-md-3 col-6 text-right text-center-xs">
                            <a class="btn btn--primary type--uppercase" href="#reservation">
                                <span class="btn__text">RESERVATION</span> </a>
                        </div>
                    </div>
                </div>
            </section>
            <section class="space--xs">
                <div class="container">
                    <div class="row">
                        <div class="col">
                            <div class="slider" data-arrows="true" data-paging="true">
                                <ul class="slides">
                                    <li> <img alt="Image" src="img/work-1.jpeg"> </li>
                                    <li> <img alt="Image" src="img/work-2.jpeg"> </li>
                                    <li> <img alt="Image" src="img/work-3.jpeg"> </li>
                                    <li> <img alt="Image" src="img/work-4.jpeg"> </li>
                                    <li> <img alt="Image" src="img/work-5.jpeg"> </li>
                                    <li> <img alt="Image" src="img/work-6.jpeg"> </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            <section class="imagebg" data-overlay="4">
                <div class="background-image-holder"> <img alt="background" src="img/hero-1.jpg"> </div>
                <div class="container">
                    <div class="row">
                        <div class="col-md-6 col-lg-3">
                            <div class="feature feature-6"> <i class="icon color--primary icon-Location-2 icon--sm"></i>
                                <h5>Location</h5>
                                <p>Situated in Anykščiai, FREGO house features accommodation with a patio and free WiFi. The air-conditioned accommodation is 40 km from Utena.</p>
                            </div>
                        </div>
                        <div class="col-md-6 col-lg-3">
                            <div class="feature feature-6"> <i class="icon color--primary icon-Green-House icon--sm"></i>
                                <h5> Facilities</h5>
                                <p> The holiday home has 2 bedrooms, a flat-screen TV with cable channels, an equipped kitchenette with a dishwasher and a fridge, a washing machine, and 1 bathroom with a shower. </p>
                            </div>
                        </div>
                        <div class="col-md-6 col-lg-3">
                            <div class="feature feature-6"> <i class="icon color--primary icon-Smile icon--sm"></i>
                                <h5>Activities</h5>
                                <p> The holiday home offers a barbecue. Skiing can be enjoyed nearby at Kalitos kalnas during the winter.</p>
                            </div>
                        </div>
                        <div class="col-md-6 col-lg-3">
                            <div class="feature feature-6"> <i class="icon color--primary icon-Bicycle icon--sm"></i>
                                <h5>Rental</h5>
                                <p> A bicycle rental service is available at FREGO house.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            <section class="text-center bg--secondary">
                <div class="container">
                    <div class="row">
                        <div class="col-lg-8 col-md-10">
                            <div class="slider" data-paging="true">
                                <ul class="slides">
                                    <li>
                                        <div class="testimonial">
                                            <blockquote> “An amazing host and outstanding house with everything you need. This was a great experience for our family and I will definitely comeback. I recommend this place for anyone visiting Anykščiai!” </blockquote>
                                            <h5>Algirdas</h5> </div>
                                    </li>
                                    <li>
                                        <div class="testimonial">
                                            <blockquote> “Nice cozy house, all new and fresh, with two double beds and a large sofa-bed. Great for 4 people, would be sufficient for 6.
                                                Very well equipped kitchen and bathroom. Nice terrace.
                                                The owner brought as some treats to welcome and offered local advice.
                                                Location is a bit off the very center but still really close, there's a cafe just next to the house.” </blockquote>
                                            <h5>Donata</h5> </div>
                                    </li>
                                    <li>
                                        <div class="testimonial">
                                            <blockquote> “Super clean and stylish house hosted by really friendly lady. I would recommend it 100%” </blockquote>
                                            <h5>Tomas</h5> </div>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            <section class="switchable bg--dark">
                <div class="container">
                    <div class="row justify-content-between">
                        <div class="col-lg-6 col-md-7 col-12">
                            <div class="map-container border--round" data-maps-api-key="AIzaSyB8wDnQ7AIc8lyBXYpEXjUbAvE5IBWMO9M" data-latlong="55.53484225312423, 25.125549298289016" data-marker-title="Stack" data-map-style="[{&quot;featureType&quot;:&quot;landscape&quot;,&quot;stylers&quot;:[{&quot;hue&quot;:&quot;#FFBB00&quot;},{&quot;saturation&quot;:43.400000000000006},{&quot;lightness&quot;:37.599999999999994},{&quot;gamma&quot;:1}]},{&quot;featureType&quot;:&quot;road.highway&quot;,&quot;stylers&quot;:[{&quot;hue&quot;:&quot;#FFC200&quot;},{&quot;saturation&quot;:-61.8},{&quot;lightness&quot;:45.599999999999994},{&quot;gamma&quot;:1}]},{&quot;featureType&quot;:&quot;road.arterial&quot;,&quot;stylers&quot;:[{&quot;hue&quot;:&quot;#FF0300&quot;},{&quot;saturation&quot;:-100},{&quot;lightness&quot;:51.19999999999999},{&quot;gamma&quot;:1}]},{&quot;featureType&quot;:&quot;road.local&quot;,&quot;stylers&quot;:[{&quot;hue&quot;:&quot;#FF0300&quot;},{&quot;saturation&quot;:-100},{&quot;lightness&quot;:52},{&quot;gamma&quot;:1}]},{&quot;featureType&quot;:&quot;water&quot;,&quot;stylers&quot;:[{&quot;hue&quot;:&quot;#0078FF&quot;},{&quot;saturation&quot;:-13.200000000000003},{&quot;lightness&quot;:2.4000000000000057},{&quot;gamma&quot;:1}]},{&quot;featureType&quot;:&quot;poi&quot;,&quot;stylers&quot;:[{&quot;hue&quot;:&quot;#00FF6A&quot;},{&quot;saturation&quot;:-1.0989010989011234},{&quot;lightness&quot;:11.200000000000017},{&quot;gamma&quot;:1}]}]" data-map-zoom="15"></div>
                        </div>
                        <div class="col-lg-5 col-md-5">
                            <div class="switchable__text">
                                <h3><br>3 Medžiotojų gatvė, 29109 <br>Anykščiai, Lithuania<br></h3>
                                <p class="lead"> E: <a href="#">emiliuka@g</a>mail.com<br> P: +370 61039271</p>
                                <p class="lead"> Give us a call or drop by anytime, we endeavour to answer all enquiries within 24 hours on business days. </p>
                                <p class="lead"> We are open from 9am — 5pm week days. </p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>


        <div class="modal-container" data-modal-id="reservation">
            <div class="modal-content section-modal">
                <section class="unpad ">
                    <div class="container">
                        <div class="row justify-content-center">
                            <div class="col-md-6 col-12">
                                <div class="feature feature-1 text-center">
                                    <div class="feature__body boxed boxed--lg boxed--border">
                                        <div class="modal-close modal-close-cross"></div>
                                        <div class="text-block">
                                            <h3>Reservation</h3>
                                            <p>
                                                Please select dates of your stay
                                            </p>
                                        </div>
                                        <!-- <div style="margin:20px 0;">
                                            <div id="litepicker"></div>
                                        </div> -->
                                        <form id="checkout" class="form--active">
                                            <input type="text" name="CHECK_IN" id="CHECK_IN" placeholder="Check In" required>
                                            <input type="text" name="CHECK_OUT" id="CHECK_OUT" placeholder="Check Out" hidden required>
                                            <input type="text" name="NAME" placeholder="Your Name" required>
                                            <input type="text" name="MOBILE" placeholder="Mobile" required>
                                            <input type="email" name="EMAIL" placeholder="Email Address" required>
                                            <div class="input-checkbox"><input type="checkbox" id="input-assigned-1" required><label for="input-assigned-1"></label></div>
                                            <span>I have read and agree to the
                                                <a href="#">terms and conditions</a>
                                            </span>
                                            <button type="submit" class="btn btn--primary type--uppercase">Continue</button>
                                        </form>
                                    </div>
                                </div>
                                <!--end feature-->
                            </div>
                        </div>
                        <!--end of row-->
                    </div>
                    <!--end of container-->
                </section>
            </div>
        </div>


        <script src="js/jquery-3.1.1.min.js"></script>
        <script src="js/flickity.min.js"></script>
        <script src="js/smooth-scroll.min.js"></script>
        <script src="js/scripts.js"></script>
        <script src="js/litepicker.js"></script>
        <script src="https://js.stripe.com/v3/"></script>

        <style>
            :root {
              /* change background color for .container__months */
              --litepicker-is-locked-color: #ff1919 !important; 
            }
        </style>

        <script>

            var API_URL = 'https://europe-central2-midyear-module-316703.cloudfunctions.net/api'; // 'http://localhost:8080/api'//
            var stripeKey = 'pk_live_51JDQphFpDWkjHXsvKadJ2md0JYjRaLQGAq4i6TseeeYYBapoOkCGkNnreHUSoICwIKxFl8DOPmnlHUKLvgizimzf00dN8DVhTY' //'pk_live_H9I6nzwQuvB2jOh4NvDXIDTd'

            var pickerIn,pickerOut;
            function initDatePicker(lockDays) {
                pickerIn = new Litepicker({ 
                    element: document.getElementById('CHECK_IN'),
                    minDate: new Date(),
                    // disallowLockDaysInRange: true,
                    lockDays: lockDays,
                    lockDaysInclusivity: "[)",
                    // inlineMode: true,
                    // singleMode: false,
                    plugins: ['mobilefriendly'],
                    setup: (picker) => {
                        picker.on('selected', (date1, date2) => {
                            // Init checkout
                            var checkOut = $('#CHECK_OUT');
                            if(pickerOut) pickerOut.destroy();
                            $('#CHECK_OUT')[0].removeAttribute('hidden');
                            checkOut.val('')
                            pickerOut = new Litepicker({ 
                                element: checkOut[0],
                                minDate: new Date(date1.dateInstance.getTime() + 24*60*60*1000),
                                // disallowLockDaysInRange: true,
                                lockDays: lockDays,
                                lockDaysInclusivity: "[)",
                                // inlineMode: true,
                                // singleMode: false,
                                plugins: ['mobilefriendly'],
                            });
                        });
                    },
                });
            }

            $.ajax({
                url: API_URL + '/bookings',
                crossDomain: true,
                method: "GET",
                cache: false,
                dataType: 'json',
                success: function(data){
                    initDatePicker(data.dates)
                },
                error: function() {
                    initDatePicker([]);
                }
            });

        
            /// STRIPE
            var stripe = Stripe(stripeKey)
            var checkoutForm = document.getElementById('checkout');

            checkoutForm.addEventListener('submit', function(e) {
                e.preventDefault();
                var from = $('#CHECK_IN').val(); //pickerIn.getDate();
                var to = $('#CHECK_OUT').val(); //pickerOut.getDate();
                if(!from || !to) {
                    alert("Please select dates of your stay");
                    return;
                }
                var data = {
                    from: from, //.dateInstance,
                    to: to, //.dateInstance,
                    mobile: $('[name=MOBILE]').val(),
                    email: $('[name=EMAIL]').val(),
                };

                // Check availability before redirecting to checkout
                $.ajax({
                    url: API_URL + '/bookings/create-session',
                    crossDomain: true,
                    method: "POST",
                    cache: false,
                    dataType: 'json',
                    contentType:"application/json; charset=utf-8",
                    data: JSON.stringify(data),
                    success: function(data) {
                        stripe.redirectToCheckout({
                            sessionId: data.id
                        }).then(function (result) {
                            if (result.error) {
                                // var displayError = document.getElementById('error-message');
                                // displayError.textContent = result.error.message;
                                alert(result.error.message)
                            }
                        });
                    },
                    error: function() {
                        alert('Oops! Something went wrong')
                    }
                });
            });
        </script>
    </body>

</html>